{% extends 'base.html' %}
{% load static %}
{% load extra_filters %}
{% load bleach_tags %}

{% block title %}{{ requested_user }}{% endblock title %}


{% block meta_image %}
{{ requested_user.profile_image.url }}
{% endblock meta_image %}


{% block description %}
{{ requested_user.description }}
{% endblock description %}


{% block body_content %}
<div class="vh-100">
    <div class="w-100 d-flex justify-content-center">
        <div class="d-flex flex-column align-items-center">
            <a href="{% url 'members:profile' requested_user.id%}" >
                <img title="{{ requested_user.first_name }} {{ post.author.last_name }}"
                    class="rounded-circle mb-2 mt-3 center-phone-img" width=200px height=200
                    src="{{ requested_user.profile_image.url }}"
                    alt="{{ requested_user.first_name }} {{ post.author.last_name }}" 
                />
            </a>
            {% if requested_user.id == user.id %}
                <a href="{% url 'members:edit' user.id%}">
                    <i class="fas fa-pencil-alt mb-2 position-relative"></i>
                </a>
            {% endif %}
        </div>
    </div>
    <div class="container d-flex flex-column justify-content-center align-items-center">
    <h4 class="card-title mb-3">
        {{ requested_user.first_name }} {{ requested_user.last_name }}
    </h4>
    <p class="card-text text-muted">
        Joined on {{ requested_user.date_joined|date:"M d, Y" }}
    </p>
    <p> This user has <b> {{ user_posts_count }} </b> post! </p>
    <p class="mw-100 text-center overflow-hidden">
        {{ requested_user.description }}
    </p>
</div>
    <div class="card-txt social-links mt-3">
        {% if requested_user.website_url %}
            <a class="px-3 text-decoration-none" 
                href="{{ requested_user.website_url }}" 
                target="_blank">
                <i class="fas fa-cloud-upload-alt" title="Author Website"></i>
            </a>
        {% endif %}
        
        {% if requested_user.instagram_url %}
            <a class="px-3 text-decoration-none" 
                href="{{ requested_user.instagram_url }}" 
                target="_blank">
                <i class="fab fa-instagram" title="Author Instagram"></i>
            </a>
        {% endif %}

        {% if requested_user.github_url %}
            <a class="px-3 text-decoration-none" 
                href="{{ requested_user.github_url }}" 
                target="_blank">
                <i class="fab fa-github" title="Author Github"></i>
            </a>
        {% endif %}

        {% if requested_user.twitter_url %}
            <a class="px-3 text-decoration-none" 
                href="{{ requested_user.twitter_url }}" 
                target="_blank">
                <i class="fab fa-twitter" title="Author Twitter"></i>
            </a>
        {% endif %}

        {% if requested_user.linkedin_url %}
            <a class="px-3 text-decoration-none" 
                href="{{ requested_user.linkedin_url }}" 
                target="_blank">
                <i class="fab fa-linkedin" title="Author Linkedin"></i>
            </a>
        {% endif %}
    </div>
</div> {% comment %} End profile {% endcomment %}

{% comment %} Used only in Blog App {% endcomment %}
{% if user_posts %}

{% comment %} To access to the number of posts, you do it with "{{user_post_count}}" {% endcomment %}

<div class="fluid-container mt-4 m-5">
    <h2 class="text-center fs-2 fw-bold">
        Posts by {{ requested_user.first_name }} {{ requested_user.last_name }}
    </h2>
</div>
{% endif %}

{% include "blog/post_list.html" with object=user_posts %}
{% endblock body_content %}