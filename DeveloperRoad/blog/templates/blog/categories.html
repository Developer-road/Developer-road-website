{% extends 'base.html' %}
{% load static %}
{% load extra_filters %}
{% block title %}Category: {{ category_post.name|title }}{% endblock title %}

{% block description %}
Page of Category: {{ category_name.title|title }}
{% endblock description %}


{% block body_content %}

<div class="posts mt-4">
    <h1>{{ category_name.name|title }}</h1>
</div>
{% for post in category_post %}
<div class="card w-70 rounded m-3">
        {% if post.header_image %}
        <div class="card mb-3">
            <img src="{{ post.header_image.url }}" alt="No image for this Post" class="card-img-top">
        </div>
        {% endif %}
        <div class="blog-abv p-2 pt-3">
            <a href="{% url 'members:profile' post.author.id %}"><span class="px-2"><img
                        src="{{ post.author.profile_image.url }}" alt="" class="rounded-circle image-opacity" width=30
                        height=30> </span>
                <span> {{ post.author.first_name }} {{ post.author.last_name }} </span></a>
            <span>{{ post.date }}</span>
        </div>

        <div class="blog-title semibold p-3">
            <h3 class="fs-2">{{ post.title|title }}</h3>
        </div>


        {% if post.description %}
        <p class="blog-description p-3 fs-5">{{ post.description | slice:":200" }}</p>
        {% else %}
        <p class="blog-description p-3 fs-5">{{ post.body | striptags | slice:":200" }}</p>
        {% endif %}


        <a href="{% url 'blog:article_page' post.pk %}" class="Read-full p-3">Read full Post</a>

        {% if user.is_authenticated and  user.id == post.author.id %}
        <div class="p-3">
            <small><a href="{% url 'blog:delete_page' post.pk %}" class="link-danger">Delete
                    post</a></small>
        </div>
        {% endif %}
</div>
{% endfor %}
{% endblock body_content %}